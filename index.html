<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PS3 XMB-style Menu (Keyboard Navigation)</title>
<style>
  :root{
    --bg1:#0b1220;
    --bg2:#1a2230;
    --accent: #00aaff;
    --muted: rgba(255,255,255,0.14);
    --glass: rgba(255,255,255,0.04);
  }

  html,body{
    height:100%;
    margin:0;
    font-family: Inter, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color:#fff;
    background:
      radial-gradient(1200px 600px at 80% 20%, rgba(255,255,255,0.03), transparent 10%),
      linear-gradient(180deg,var(--bg1),var(--bg2));
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  /* subtle wave background (PS3-like) */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background-image: linear-gradient(90deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.01) 50%, rgba(255,255,255,0.02) 100%);
    transform:rotate(-6deg) translateY(-40px);
    filter: blur(12px) contrast(.9);
    pointer-events:none;
    z-index:0;
  }

  .container{
    position:relative;
    height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:28px;
    padding:28px;
    box-sizing:border-box;
    z-index:1;
  }

  /* Category strip (horizontal) */
  .categories{
    display:flex;
    gap:34px;
    align-items:end;
    justify-content:center;
    transform:translateY(-12px);
    user-select:none;
    min-width:60%;
  }

  .category{
    display:flex;
    flex-direction:column;
    align-items:center;
    width:110px;
    transition:transform .22s cubic-bezier(.2,.9,.3,1), filter .22s;
    transform-origin:center bottom;
    color:rgba(255,255,255,0.86);
    text-align:center;
    cursor:default;
  }

  .category .icon{
    font-size:36px;
    width:78px;
    height:78px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    box-shadow: 0 8px 18px rgba(0,0,0,0.45), inset 0 -2px 6px rgba(255,255,255,0.02);
    transition:transform .22s, box-shadow .22s, background .22s;
  }

  .category .label{
    margin-top:10px;
    font-size:14px;
    letter-spacing:.6px;
    opacity:.95;
  }

  .category.selected{
    transform:translateY(-16px) scale(1.12);
  }
  .category.selected .icon{
    transform:scale(1.12);
    box-shadow: 0 18px 30px rgba(0,0,0,0.6), 0 0 18px rgba(0,170,255,0.12);
    background: linear-gradient(180deg, rgba(0,170,255,0.12), rgba(0,170,255,0.04));
    border: 1px solid rgba(0,170,255,0.12);
  }

  /* Reflection under categories (subtle) */
  .category .reflection{
    height:6px;
    width:78px;
    margin-top:8px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.0));
    opacity:0.35;
    border-radius:6px;
    visibility:hidden;
  }
  .category.selected .reflection{ visibility:visible; }

  /* Items panel (vertical) */
  .items-panel{
    width:720px;
    max-width:92vw;
    min-height:160px;
    padding:20px 22px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    display:flex;
    gap:18px;
    align-items:flex-start;
  }

  .items-list{
    flex:1 1 auto;
  }

  .item{
    display:flex;
    gap:14px;
    align-items:center;
    padding:12px 14px;
    border-radius:10px;
    margin-bottom:10px;
    transition:background .18s, transform .18s;
    cursor:default;
    color:rgba(255,255,255,0.9);
  }
  .item:last-child{ margin-bottom:0; }

  .item .thumb{
    width:72px;
    height:48px;
    border-radius:8px;
    background:var(--glass);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    font-size:14px;
    flex:0 0 72px;
  }
  .item .meta{
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .item .title{
    font-size:16px;
    letter-spacing:.2px;
  }
  .item .sub{
    font-size:12px;
    color:rgba(255,255,255,0.55);
  }

  .item.selected{
    background: linear-gradient(90deg, rgba(0,170,255,0.06), rgba(255,255,255,0.01));
    transform:translateX(8px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.45);
    border-left:4px solid var(--accent);
  }

  /* Right side preview */
  .preview{
    width:240px;
    min-width:200px;
    display:flex;
    flex-direction:column;
    gap:8px;
    align-items:center;
    justify-content:center;
  }
  .preview .screen{
    width:100%;
    padding:10px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(0,0,0,0.28), rgba(255,255,255,0.02));
    height:120px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:rgba(255,255,255,0.95);
    text-align:center;
    font-size:13px;
    line-height:1.2;
  }
  .preview .small{
    font-size:12px;
    color:rgba(255,255,255,0.6);
  }

  /* bottom hints */
  .hints{
    position:fixed;
    bottom:18px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:18px;
    align-items:center;
    padding:8px 14px;
    border-radius:999px;
    background:rgba(0,0,0,0.22);
    color:rgba(255,255,255,0.85);
    font-size:13px;
    z-index:2;
  }

  /* selection overlay */
  .overlay{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.68));
    z-index:50;
    opacity:0;
    pointer-events:none;
    transition:opacity .18s;
  }
  .overlay.visible{
    opacity:1;
    pointer-events:auto;
  }
  .overlay .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    padding:22px;
    border-radius:12px;
    min-width:320px;
    text-align:center;
    box-shadow: 0 18px 50px rgba(0,0,0,0.7);
  }
  .overlay .title{ font-size:18px; margin-bottom:8px; }
  .overlay .subtitle{ font-size:13px; color:rgba(255,255,255,0.7); margin-bottom:10px; }

  @media (max-width:820px){
    .items-panel{flex-direction:column; align-items:stretch; gap:12px;}
    .preview{width:100%;}
    .categories{gap:18px;}
    .category{width:96px;}
  }
</style>
</head>
<body>
  <div class="container" role="application" aria-label="PS3 XMB style menu">
    <div class="categories" id="categories"></div>

    <div class="items-panel" id="itemsPanel" aria-live="polite">
      <div class="items-list" id="itemsList"></div>
      <div class="preview" id="preview">
        <div class="screen" id="previewScreen">Select an item to see preview</div>
        <div class="small">Press Enter / Space to open ‚Ä¢ Use arrow keys to navigate</div>
      </div>
    </div>
  </div>

  <div class="hints">
    <div>‚óÄ ‚ñ∂ - Categories</div>
    <div>‚ñ≤ ‚ñº - Items</div>
    <div>‚èé / Space - Select</div>
    <div>Esc - Close selection</div>
  </div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="card" role="dialog" aria-modal="true">
      <div class="title" id="overlayTitle">Opening...</div>
      <div class="subtitle" id="overlaySubtitle">Simulated action ‚Äî press Esc or Enter to close.</div>
      <div style="margin-top:12px;"><button id="closeBtn" style="padding:8px 14px;border-radius:8px;border:none;background:var(--accent);color:#001;cursor:pointer;font-weight:600;">Close</button></div>
    </div>
  </div>

<script>
(function(){
  // Menu data: categories and items. Edit/add as desired.
  const menu = [
    { id:'game',  icon:'üéÆ', label:'Game', items:[
      { title:'Game Data Utility', subtitle:'Saved data & profiles' },
      { title:'Trophy Collection', subtitle:'View trophies' },
      { title:'Saved Files Utility (PS3‚Ñ¢)', subtitle:'Saved data manager' },
      { title:'Install Package Files', subtitle:'(dev system)' },
    ]},
    { id:'video', icon:'üéûÔ∏è', label:'Video', items:[
      { title:'Video Library', subtitle:'Movies & clips' },
      { title:'Video Store', subtitle:'Download movies' },
      { title:'Play Video', subtitle:'Open media player' },
    ]},
    { id:'music', icon:'üéµ', label:'Music', items:[
      { title:'Music Library', subtitle:'Songs & playlists' },
      { title:'Rip Disc', subtitle:'Rip audio CD' },
      { title:'Party', subtitle:'Party settings' },
    ]},
    { id:'network', icon:'üåê', label:'Network', items:[
      { title:'Internet Browser', subtitle:'Open web browser' },
      { title:'Friends', subtitle:'Friends list & chat' },
      { title:'Account Management', subtitle:'PSN account settings' },
    ]},
    { id:'settings', icon:'‚öôÔ∏è', label:'Settings', items:[
      { title:'System Settings', subtitle:'General system options' },
      { title:'Display Settings', subtitle:'Video & resolution' },
      { title:'Network Settings', subtitle:'Internet setup' },
      { title:'Accessory Settings', subtitle:'Controllers & peripherals' },
    ]},
    { id:'photo', icon:'üñºÔ∏è', label:'Photo', items:[
      { title:'Photo Gallery', subtitle:'View images' },
      { title:'Slideshow', subtitle:'Start slideshow' },
    ]},
  ];

  // State
  let catIndex = 0;
  let itemIndices = new Array(menu.length).fill(0);

  // Elements
  const categoriesEl = document.getElementById('categories');
  const itemsListEl = document.getElementById('itemsList');
  const previewScreen = document.getElementById('previewScreen');
  const overlay = document.getElementById('overlay');
  const overlayTitle = document.getElementById('overlayTitle');
  const overlaySubtitle = document.getElementById('overlaySubtitle');
  const closeBtn = document.getElementById('closeBtn');

  // Render categories
  function renderCategories(){
    categoriesEl.innerHTML = '';
    menu.forEach((c, i) => {
      const cat = document.createElement('div');
      cat.className = 'category' + (i===catIndex ? ' selected' : '');
      cat.dataset.index = i;
      cat.setAttribute('role','button');
      cat.setAttribute('aria-pressed', i===catIndex ? 'true' : 'false');
      cat.innerHTML = `
        <div class="icon" aria-hidden="true">${c.icon}</div>
        <div class="label">${c.label}</div>
        <div class="reflection"></div>
      `;
      // click support too
      cat.addEventListener('click', ()=> {
        catIndex = Number(cat.dataset.index);
        // reset item pointer for that category if out of range
        if (itemIndices[catIndex] >= menu[catIndex].items.length) itemIndices[catIndex]=0;
        refresh();
      });
      categoriesEl.appendChild(cat);
    });
  }

  // Render items for selected category
  function renderItems(){
    const cat = menu[catIndex];
    itemsListEl.innerHTML = '';
    cat.items.forEach((it, idx) => {
      const item = document.createElement('div');
      item.className = 'item' + (idx===itemIndices[catIndex] ? ' selected' : '');
      item.dataset.index = idx;
      item.innerHTML = `
        <div class="thumb">${cat.icon}</div>
        <div class="meta">
          <div class="title">${it.title}</div>
          <div class="sub">${it.subtitle || ''}</div>
        </div>
      `;
      item.addEventListener('click', ()=>{
        itemIndices[catIndex] = Number(item.dataset.index);
        refresh();
        openSelection();
      });
      itemsListEl.appendChild(item);
    });
  }

  // Update preview info
  function updatePreview(){
    const cat = menu[catIndex];
    const it = cat.items[itemIndices[catIndex]] || {};
    previewScreen.innerHTML = `<strong style="font-size:15px">${it.title || 'No item'}</strong><div style="margin-top:8px;font-size:13px;color:rgba(255,255,255,0.75)">${it.subtitle || ''}</div>`;
  }

  // Refresh UI state
  function refresh(){
    // categories
    Array.from(categoriesEl.children).forEach((el, i) => {
      el.classList.toggle('selected', i===catIndex);
      el.setAttribute('aria-pressed', i===catIndex ? 'true' : 'false');
    });
    // items
    renderItems();
    updatePreview();
    // ensure selected item is visible (if items panel becomes scrollable)
    const selectedEl = itemsListEl.querySelector('.item.selected');
    if(selectedEl){
      selectedEl.scrollIntoView({block:'nearest', behavior:'smooth'});
    }
  }

  // Navigation handlers
  function moveCategory(dir){
    catIndex = (catIndex + dir + menu.length) % menu.length;
    // ensure item index valid
    if (itemIndices[catIndex] >= menu[catIndex].items.length) itemIndices[catIndex] = 0;
    refresh();
  }

  function moveItem(dir){
    const len = menu[catIndex].items.length;
    const cur = itemIndices[catIndex];
    itemIndices[catIndex] = (cur + dir + len) % len;
    refresh();
  }

  // selection "open"
  function openSelection(){
    const cat = menu[catIndex];
    const it = cat.items[itemIndices[catIndex]] || {};
    overlayTitle.textContent = (it.title ? `Open: ${it.title}` : 'Opening...');
    overlaySubtitle.textContent = `${cat.label} ‚Ä¢ ${it.subtitle || ''}`;
    overlay.classList.add('visible');
    overlay.setAttribute('aria-hidden','false');
    // focus close button for keyboard users
    closeBtn.focus();
  }

  function closeSelection(){
    overlay.classList.remove('visible');
    overlay.setAttribute('aria-hidden','true');
    // return keyboard focus to body so navigation works
    document.body.focus();
  }

  // initial render
  renderCategories();
  renderItems();
  updatePreview();

  // keyboard handling
  window.addEventListener('keydown', (e) => {
    const key = e.key;
    // If overlay visible, let Enter/Escape close it
    if (overlay.classList.contains('visible')){
      if (key === 'Escape' || key === 'Enter' || key === ' '){
        e.preventDefault();
        closeSelection();
      }
      return;
    }

    if (key === 'ArrowLeft'){
      e.preventDefault();
      moveCategory(-1);
    } else if (key === 'ArrowRight'){
      e.preventDefault();
      moveCategory(1);
    } else if (key === 'ArrowUp'){
      e.preventDefault();
      moveItem(-1);
    } else if (key === 'ArrowDown'){
      e.preventDefault();
      moveItem(1);
    } else if (key === 'Enter' || key === ' '){
      e.preventDefault();
      openSelection();
    }
  });

  // overlay close button
  closeBtn.addEventListener('click', closeSelection);

  // also close overlay on ESC globally
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && overlay.classList.contains('visible')){
      closeSelection();
    }
  });

  // small focus trick for accessibility: make body focusable then focus it
  document.body.tabIndex = -1;
  document.body.focus();

  // Expose some debugging controls if needed (optional)
  window.XMB = {
    getState: ()=>({catIndex, itemIndices}),
    setCategory: (i)=>{ catIndex = i % menu.length; refresh(); },
  };

})();
</script>
</body>
</html>
